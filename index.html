<!DOCTYPE html>
<html lang="ko" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš°ì§€í˜• í¬íŠ¸í´ë¦¬ì˜¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: "#8c2bee",
                        bgDark: "#100a16",
                        bgCard: "#1e1628",
                        textGray: "#ab9db9"
                    },
                    fontFamily: {
                        sans: ['Noto Sans KR', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #100a16; color: white; }
        .glass-card {
            background: rgba(30, 22, 40, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            border-color: rgba(140, 43, 238, 0.3);
            background: rgba(30, 22, 40, 0.8);
            transform: translateY(-2px);
        }
        
        /* í¸ì§‘ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        body.is-editing .editable-target {
            border: 1px dashed #8c2bee;
            background: rgba(140, 43, 238, 0.1);
            cursor: text;
        }
        body.is-editing .editable-img {
            cursor: pointer;
            border: 2px dashed #8c2bee !important;
            opacity: 0.8;
        }
        body.is-editing a.editable-link {
            cursor: alias !important;
            border: 1px dotted #8c2bee;
            position: relative;
        }
        
        #profile-img {
            aspect-ratio: 1 / 1;
            object-fit: cover;
            border-radius: 50%;
        }
        #detail-desc {
            white-space: pre-line;
            line-height: 1.8;
        }
        /* ë¡œë”© ì¸ë””ì¼€ì´í„° */
        #loading-screen {
            position: fixed; inset: 0; background: #100a16; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col p-4 md:p-8 max-w-7xl mx-auto">

    <div id="loading-screen">
        <div class="text-center">
            <span class="material-symbols-outlined text-5xl text-primary animate-spin">sync</span>
            <p class="mt-4 text-gray-400 font-bold">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
    </div>

    <header class="flex justify-between items-center mb-8 sticky top-0 z-40 py-4 bg-[#100a16]/80 backdrop-blur-md">
        <div class="flex items-center gap-4">
            <button id="editToggleBtn" class="flex items-center gap-2 bg-primary/20 text-primary px-4 py-2 rounded-lg hover:bg-primary/40 transition-all font-bold">
                <span class="material-symbols-outlined">edit_square</span>
                <span id="editBtnText">í¸ì§‘ ëª¨ë“œ</span>
            </button>
        </div>
        <a href="mailto:example@gmail.com" id="contact-link" class="editable-link bg-white text-black px-6 py-2 rounded-full font-bold hover:bg-gray-200 transition-colors flex items-center gap-2">
            <span>Contact Me</span>
            <span class="material-symbols-outlined text-sm">send</span>
        </a>
    </header>

    <main class="grid grid-cols-1 md:grid-cols-3 md:grid-rows-3 gap-6 md:h-[85vh]">
        
        <div class="glass-card rounded-3xl p-8 md:row-span-2 md:col-span-1 flex flex-col items-center text-center relative overflow-hidden group">
            <div class="relative w-48 h-48 mb-6 group-hover:scale-105 transition-transform duration-500">
                <img id="profile-img" src="https://via.placeholder.com/300" alt="Profile" class="editable-img w-full h-full border-4 border-primary/30 shadow-2xl">
            </div>
            
            <h1 id="profile-name" class="editable-target text-3xl font-black mb-2">ìš°ì§€í˜•</h1>
            <p id="profile-role" class="editable-target text-primary font-bold mb-6">Growth Marketer</p>
            
            <div id="profile-desc" class="editable-target text-textGray leading-relaxed mb-auto text-sm">
                ì¸ë¬¸í•™ì  í†µì°°ê³¼ ì±…ì„ìˆëŠ” ì‹¤í–‰ë ¥ì„ ê°€ì§„<br>ë¯¸ë˜ì˜ ê¸°ì ì§€ë§ìƒì…ë‹ˆë‹¤.
            </div>

            <div class="flex gap-4 mt-6">
                <a href="https://instagram.com" id="sns-insta" target="_blank" class="editable-link w-12 h-12 flex items-center justify-center bg-white/5 rounded-full hover:bg-gradient-to-tr hover:from-yellow-400 hover:via-red-500 hover:to-purple-500 transition-all hover:scale-110">
                    <i class="fab fa-instagram text-xl"></i>
                </a>
                <a href="mailto:example@gmail.com" id="sns-email" class="editable-link w-12 h-12 flex items-center justify-center bg-white/5 rounded-full hover:bg-white hover:text-red-500 transition-all hover:scale-110">
                    <i class="far fa-envelope text-xl"></i>
                </a>
            </div>
        </div>

        <div class="glass-card rounded-3xl p-6 md:col-span-1 flex flex-col justify-between relative overflow-hidden min-h-[160px]">
            <div class="flex justify-between items-start">
                <span class="w-3 h-3 bg-green-500 rounded-full animate-pulse shadow-[0_0_10px_#22c55e]"></span>
                <span class="material-symbols-outlined text-textGray">verified</span>
            </div>
            <div>
                <p class="text-textGray text-xs font-bold uppercase tracking-wider mb-2">Current Status</p>
                <h3 id="status-text" class="editable-target text-2xl font-bold leading-tight">SKCE 23ê¸° ì§€ì› ğŸ‘‹</h3>
            </div>
        </div>

        <div class="glass-card rounded-3xl md:col-span-1 overflow-hidden relative group cursor-pointer min-h-[200px]" onclick="editMap()">
            <iframe id="map-frame" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3165.352646679544!2d126.9554!3d37.4963!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ca1d5c2e97669%3A0xc3b86027735397f3!2z7Iit7Iuk64yA7ZWZ6rWQ!5e0!3m2!1sko!2skr!4v1234567890" 
                class="w-full h-full border-0 filter grayscale invert contrast-125 opacity-70 hover:opacity-100 transition-opacity" allowfullscreen="" loading="lazy"></iframe>
            <div class="absolute bottom-4 left-4 bg-bgDark/80 px-3 py-1 rounded-lg text-xs font-bold backdrop-blur-sm pointer-events-none flex items-center gap-1">
                <span class="material-symbols-outlined text-[14px] text-primary">location_on</span>
                Soongsil Univ.
            </div>
        </div>

        <div class="glass-card rounded-3xl p-6 md:row-span-2 md:col-span-1 flex flex-col relative overflow-hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold flex items-center gap-2"><span class="material-symbols-outlined text-primary">history_edu</span> Experience</h2>
            </div>
            <div class="overflow-y-auto pr-2 space-y-6 flex-1 custom-scrollbar" id="timeline-container">
                </div>
        </div>

        <div class="glass-card rounded-3xl p-6 md:row-span-2 md:col-span-1 flex flex-col overflow-hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Recent Work</h2>
            </div>
            <div class="overflow-y-auto pr-2 space-y-4 flex-1 custom-scrollbar" id="work-container">
                </div>
        </div>

        <div class="md:col-span-1 flex gap-2">
            <div class="glass-card rounded-2xl flex-1 flex flex-col justify-center items-center p-4 hover:bg-white/5 transition-colors cursor-pointer" onclick="openDetail('skill-perf')">
                <span class="material-symbols-outlined text-3xl text-blue-400 mb-2">analytics</span>
                <span class="font-bold text-sm">Performance</span>
                <span class="text-[10px] text-gray-500 mt-1">Skills Detail</span>
            </div>
            <div class="glass-card rounded-2xl flex-1 flex flex-col justify-center items-center p-4 hover:bg-white/5 transition-colors cursor-pointer" onclick="openDetail('skill-copy')">
                <span class="material-symbols-outlined text-3xl text-pink-400 mb-2">emoji_events</span>
                <span class="font-bold text-sm">Awards</span>
                <span class="text-[10px] text-gray-500 mt-1">Awards Detail</span>
            </div>
        </div>
    </main>

    <footer class="mt-8 text-center text-textGray text-xs">
        <p>Â© 2025 Woo Jee-hyung. All rights reserved.</p>
    </footer>

    <div id="detail-overlay" class="fixed inset-0 bg-bgDark z-50 hidden overflow-y-auto">
        <button onclick="closeDetail()" class="fixed top-6 right-6 z-[60] bg-black/50 p-2 rounded-full hover:bg-primary text-white transition-colors">
            <span class="material-symbols-outlined text-3xl">close</span>
        </button>
        
        <div class="w-full h-80 relative group">
            <img id="detail-hero-img" src="https://via.placeholder.com/1200x400" class="w-full h-full object-cover opacity-60">
            <div class="absolute inset-0 bg-gradient-to-t from-bgDark to-transparent"></div>
            <div class="absolute top-6 left-6 flex items-center gap-3">
                 <div class="bg-primary px-3 py-1 rounded-full text-xs font-bold text-white">PORTFOLIO DETAIL</div>
            </div>
        </div>

        <div class="max-w-4xl mx-auto -mt-32 relative px-4 pb-20">
            <div class="glass-card bg-[#1e1628] p-8 md:p-12 rounded-3xl shadow-2xl border border-white/10">
                <div class="flex gap-4 mb-4 text-sm font-mono text-primary">
                    <span id="detail-date" class="editable-detail">DATE</span>
                    <span>|</span>
                    <span id="detail-company" class="editable-detail">COMPANY</span>
                </div>
                <h1 id="detail-title" class="editable-detail text-3xl md:text-5xl font-black mb-6 leading-tight">ì œëª©</h1>
                <hr class="border-white/10 my-8">
                
                <div class="space-y-6">
                    <h3 class="text-lg font-bold text-white">ğŸ“Œ ìƒì„¸ ë‚´ìš©</h3>
                    <p id="detail-desc" class="editable-detail text-gray-300">ë‚´ìš©ì´ ë¡œë“œë©ë‹ˆë‹¤...</p>
                </div>
                
                <div id="detail-extra-section" class="mt-10 p-6 bg-white/5 rounded-xl border border-white/5">
                    <h3 class="text-sm font-bold text-gray-400 mb-2 uppercase">Tools / Awards / Links</h3>
                    <div id="detail-extra" class="editable-detail text-white font-medium whitespace-pre-line"></div>
                </div>
                
                <div class="mt-8 flex justify-end">
                    <a href="#" id="detail-link" target="_blank" class="editable-link bg-white text-black px-6 py-3 rounded-xl font-bold hover:bg-gray-200 transition-all flex items-center gap-2 hidden">
                        ê´€ë ¨ ë§í¬/ê¸°ì‚¬ ë³´ê¸° <span class="material-symbols-outlined text-sm">open_in_new</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // ìš°ì§€í˜•ë‹˜ì˜ Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyBE0teXJrc6TzhiCdw-PVQnB--qSsDGjFg",
            authDomain: "woo-portfolio-4f289.firebaseapp.com",
            projectId: "woo-portfolio-4f289",
            storageBucket: "woo-portfolio-4f289.firebasestorage.app",
            messagingSenderId: "684980980660",
            appId: "1:684980980660:web:538774434c11340001c0e1"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ì´ˆê¸° ê¸°ë³¸ ë°ì´í„° (DBê°€ ë¹„ì—ˆì„ ë•Œ ì‚¬ìš©)
        let portfolioData = {
            profile: {
                name: "ìš°ì§€í˜•",
                role: "Growth Marketer",
                desc: "ì¸ë¬¸í•™ì  í†µì°°ê³¼ ì±…ì„ìˆëŠ” ì‹¤í–‰ë ¥ì„ ê°€ì§„\në¯¸ë˜ì˜ ê¸°ì ì§€ë§ìƒì…ë‹ˆë‹¤.",
                status: "SKCE 23ê¸° ì§€ì› ğŸ‘‹",
                img: "https://via.placeholder.com/300",
                insta: "https://instagram.com",
                email: "mailto:example@gmail.com",
                contact: "mailto:example@gmail.com",
                map: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3165.352646679544!2d126.9554!3d37.4963!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x357ca1d5c2e97669%3A0xc3b86027735397f3!2z7Iit7Iuk64yA7ZWZ6rWQ!5e0!3m2!1sko!2skr!4v1234567890"
            },
            experiences: [
                { id: 'exp1', date: "2025.08 - Present", title: "CEOì €ë„ ëŒ€í•™ìƒ ê¸°ìë‹¨ 12ê¸°", company: "CEOì €ë„" },
                { id: 'exp2', date: "2025.05 - 2025.12", title: "ì„œìš¸ëŸ° ë©˜í† ë‹¨ í”„ë Œì¦ˆ", company: "ì„œìš¸ëŸ°" },
                { id: 'exp3', date: "2025.01 - 2025.12", title: "ê¸°ë…êµí•™ê³¼ í•™ìƒíšŒ ë¶€í•™ìƒíšŒì¥", company: "ìˆ­ì‹¤ëŒ€í•™êµ" },
                { id: 'exp4', date: "2024.01 - 2024.12", title: "ê¸°ë…êµí•™ê³¼ í•™ìƒíšŒ ì„œê¸°", company: "ìˆ­ì‹¤ëŒ€í•™êµ" }
            ],
            works: [
                { id: 'work1', type: "ACTIVITY", title: "ì„œìš¸ëŸ° ë©˜í† ë‹¨ 6ì›” ìš°ìˆ˜ì½˜í…ì¸ ", desc: "ì„œìš¸ëŸ° ë©˜í† ë‹¨ í”„ë Œì¦ˆ ìš°ìˆ˜ ì½˜í…ì¸  ì„ ì •" },
                { id: 'work2', type: "INTERVIEW", title: "ì¡°í¥ì‹ å‰ ì‚¬ë‘ì˜ì—´ë§¤ íšŒì¥", desc: "[ì›”ê°„ CEOì €ë„] ë³µì§€ ì „ë¬¸ê°€ì™€ì˜ ì¸í„°ë·°" },
                { id: 'work3', type: "INTERVIEW", title: "ìœ¤ê¸°ë¬˜ ì•„í”„ë¦¬ì¹´ì¸ì‚¬ì´íŠ¸ íŒ€ì¥", desc: "[ì„¸ìƒ ì½ê¸°] íŒ¨ì…˜ìœ¼ë¡œ ë³´ì—¬ì¤€ ì•„í”„ë¦¬ì¹´" },
                { id: 'work4', type: "INTERVIEW", title: "ì´ê´‘íšŒ í•œêµ­í•´ë¹„íƒ€íŠ¸ ì‚¬ë¬´ì´ì¥", desc: "[ì„¸ìƒ ì½ê¸°] ëª¨ë“  ì‚¬ëŒì—ê²Œ ì•ˆë½í•œ ì§‘ì„" },
                { id: 'work5', type: "INTERVIEW", title: "ì´ë¬¸ìˆ˜ ì²­ë…„ë°¥ìƒ ë¬¸ê°„ ì´ì‚¬ì¥", desc: "[ì„¸ìƒ ì½ê¸°] ì²­ë…„ë“¤ì˜ ë°¥ìƒì„ ìœ„í•˜ì—¬" }
            ],
            details: {
                'work1': { title: "ì„œìš¸ëŸ° ë©˜í† ë‹¨ 6ì›” ìš°ìˆ˜ì½˜í…ì¸ ", desc: "ë‚´ìš©...", extra: "ì„±ê³¼: ìš°ìˆ˜ ì½˜í…ì¸ ", link: "#" },
                'work2': { title: "ì¡°í¥ì‹ íšŒì¥ ì¸í„°ë·°", desc: "ë‚´ìš©...", extra: "í˜•ì‹: ì¸í„°ë·°", link: "#" },
                'skill-perf': { title: "OA Skills", desc: "PPT 95%, Excel 80%", extra: "ìê²©ì¦ ë³´ìœ ", link: "#" },
                'skill-copy': { title: "Awards", desc: "ì˜¥í˜¸ì—´ í•™ìˆ ìƒ 2íšŒ", extra: "ìˆ˜ìƒ ë‚´ì—­", link: "#" }
            }
        };

        let isEditing = false;

        // 1. ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° (Read)
        async function loadContent() {
            try {
                const docRef = doc(db, "portfolio", "main");
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    console.log("ğŸ”¥ Firebaseì—ì„œ ë°ì´í„° ë¡œë“œ ì„±ê³µ!");
                    portfolioData = docSnap.data();
                } else {
                    console.log("ë°ì´í„° ì—†ìŒ. ê¸°ë³¸ê°’ ì‚¬ìš©.");
                }
                renderAll();
            } catch (e) {
                console.error("ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", e);
                alert("ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (ì½˜ì†” í™•ì¸)");
            } finally {
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(() => document.getElementById('loading-screen').remove(), 500);
            }
        }

        // 2. í™”ë©´ ê·¸ë¦¬ê¸° (Render)
        function renderAll() {
            // í”„ë¡œí•„
            document.getElementById('profile-name').innerText = portfolioData.profile.name;
            document.getElementById('profile-role').innerText = portfolioData.profile.role;
            document.getElementById('profile-desc').innerHTML = portfolioData.profile.desc.replace(/\n/g, '<br>');
            document.getElementById('status-text').innerText = portfolioData.profile.status;
            document.getElementById('profile-img').src = portfolioData.profile.img;
            document.getElementById('sns-insta').href = portfolioData.profile.insta;
            document.getElementById('sns-email').href = portfolioData.profile.email;
            document.getElementById('contact-link').href = portfolioData.profile.contact;
            document.getElementById('map-frame').src = portfolioData.profile.map;

            // ê²½ë ¥ ë¦¬ìŠ¤íŠ¸
            const timelineHTML = portfolioData.experiences.map(exp => `
                <div class="relative pl-6 border-l-2 border-primary/30 hover:border-primary transition-colors cursor-pointer group" onclick="openDetail('${exp.id}')">
                    <span class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-bgDark border-2 border-primary group-hover:scale-110 transition-transform"></span>
                    <span class="text-xs text-primary font-bold mb-1 block">${exp.date}</span>
                    <h3 class="text-lg font-bold mb-1">${exp.title}</h3>
                    <p class="text-sm text-textGray">${exp.company}</p>
                </div>
            `).join('');
            document.getElementById('timeline-container').innerHTML = timelineHTML;

            // í”„ë¡œì íŠ¸ ë¦¬ìŠ¤íŠ¸
            const workHTML = portfolioData.works.map(work => `
                <div class="bg-bgDark/50 p-4 rounded-xl border border-white/5 hover:border-primary/50 transition-all cursor-pointer group" onclick="openDetail('${work.id}')">
                    <div class="flex justify-between items-start mb-2">
                        <span class="bg-primary/20 text-primary text-[10px] px-2 py-0.5 rounded font-bold">${work.type}</span>
                        <span class="material-symbols-outlined text-gray-500 group-hover:text-white text-sm">arrow_outward</span>
                    </div>
                    <h3 class="font-bold text-white mb-1">${work.title}</h3>
                    <p class="text-xs text-textGray line-clamp-2">${work.desc}</p>
                </div>
            `).join('');
            document.getElementById('work-container').innerHTML = workHTML;
        }

        // 3. ë°ì´í„° ì €ì¥ (Write)
        async function saveContent() {
            // í˜„ì¬ DOMì— ìˆëŠ” ë°ì´í„°ë¥¼ ë³€ìˆ˜ì— ì—…ë°ì´íŠ¸
            portfolioData.profile.name = document.getElementById('profile-name').innerText;
            portfolioData.profile.role = document.getElementById('profile-role').innerText;
            portfolioData.profile.desc = document.getElementById('profile-desc').innerText; // ì¤„ë°”ê¿ˆ ìœ ì§€ ìœ„í•´ innerText
            portfolioData.profile.status = document.getElementById('status-text').innerText;
            portfolioData.profile.img = document.getElementById('profile-img').src;
            portfolioData.profile.insta = document.getElementById('sns-insta').href;
            portfolioData.profile.email = document.getElementById('sns-email').href;
            portfolioData.profile.contact = document.getElementById('contact-link').href;
            portfolioData.profile.map = document.getElementById('map-frame').src;
            
            // (ë¦¬ìŠ¤íŠ¸ë‚˜ ìƒì„¸ í˜ì´ì§€ ë‚´ìš©ì€ ë³„ë„ í¸ì§‘ UIê°€ í•„ìš”í•˜ì§€ë§Œ, 
            // ì¼ë‹¨ 'ìƒì„¸ í˜ì´ì§€'ì—ì„œ ìˆ˜ì •í•œ ë‚´ìš©ì´ details ê°ì²´ì— ë°˜ì˜ë˜ì–´ ìˆì–´ì•¼ í•¨. 
            // í˜„ì¬ êµ¬ì¡°ìƒ openDetail/closeDetailì—ì„œ ë™ê¸°í™” ë¡œì§ì´ í•„ìš”í•¨.)

            try {
                await setDoc(doc(db, "portfolio", "main"), portfolioData);
                alert("âœ… êµ¬ê¸€ ì„œë²„ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ ì–´ë””ì„œë“  ì´ ë‚´ìš©ì´ ë³´ì…ë‹ˆë‹¤.");
            } catch (e) {
                console.error("ì €ì¥ ì‹¤íŒ¨:", e);
                alert("ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ! (ì½˜ì†” í™•ì¸)");
            }
        }

        // 4. í¸ì§‘ ëª¨ë“œ í† ê¸€
        document.getElementById('editToggleBtn').addEventListener('click', () => {
            isEditing = !isEditing;
            const body = document.body;
            const btnText = document.getElementById('editBtnText');
            
            if (isEditing) {
                body.classList.add('is-editing');
                btnText.innerText = "ë³€ê²½ì‚¬í•­ ì €ì¥";
                document.getElementById('editToggleBtn').classList.add('bg-red-500', 'text-white');
                document.getElementById('editToggleBtn').classList.remove('bg-primary/20', 'text-primary');
                
                // í…ìŠ¤íŠ¸ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ
                document.querySelectorAll('.editable-target').forEach(el => el.contentEditable = "true");
                
                alert("âœï¸ í¸ì§‘ ëª¨ë“œ ON\n- ê¸€ìë¥¼ í´ë¦­í•´ì„œ ìˆ˜ì •í•˜ì„¸ìš”.\n- ì‚¬ì§„/ë§í¬ë¥¼ í´ë¦­í•´ì„œ ì£¼ì†Œë¥¼ ë°”ê¾¸ì„¸ìš”.\n- ë‹¤ ê³ ì¹˜ë©´ 'ë³€ê²½ì‚¬í•­ ì €ì¥'ì„ ëˆ„ë¥´ì„¸ìš”.");
            } else {
                // ì €ì¥ ì‹œë„
                saveContent().then(() => {
                    body.classList.remove('is-editing');
                    btnText.innerText = "í¸ì§‘ ëª¨ë“œ";
                    document.getElementById('editToggleBtn').classList.remove('bg-red-500', 'text-white');
                    document.getElementById('editToggleBtn').classList.add('bg-primary/20', 'text-primary');
                    document.querySelectorAll('.editable-target').forEach(el => el.contentEditable = "false");
                });
            }
        });

        // ë§í¬/ì´ë¯¸ì§€ í¸ì§‘ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('click', function(e) {
            if (!isEditing) return;

            // ë§í¬ ìˆ˜ì •
            const link = e.target.closest('a.editable-link');
            if (link) {
                e.preventDefault();
                const newUrl = prompt("ìƒˆë¡œìš´ ë§í¬ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”:", link.href);
                if (newUrl) link.href = newUrl;
            }
            
            // ì´ë¯¸ì§€ ìˆ˜ì •
            if (e.target.tagName === 'IMG' && e.target.classList.contains('editable-img')) {
                const newSrc = prompt("ìƒˆë¡œìš´ ì´ë¯¸ì§€ ì£¼ì†Œ(URL)ë¥¼ ì…ë ¥í•˜ì„¸ìš”:", e.target.src);
                if (newSrc) e.target.src = newSrc;
            }
        });

        // ì „ì—­ í•¨ìˆ˜ ì—°ê²° (ëª¨ë“ˆ ìŠ¤ì½”í”„ íƒˆì¶œ)
        window.editMap = function() {
            if (isEditing) {
                const frame = document.getElementById('map-frame');
                const newCode = prompt("êµ¬ê¸€ ì§€ë„ ì„ë² ë“œ ì£¼ì†Œ(src)ë¥¼ ì…ë ¥í•˜ì„¸ìš”:", frame.src);
                if (newCode) frame.src = newCode;
            }
        };

        window.openDetail = function(key) {
            // ìƒì„¸ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ê»ë°ê¸°ë¼ë„ ë³´ì—¬ì¤Œ
            if (!portfolioData.details) portfolioData.details = {};
            if (!portfolioData.details[key]) {
                // ê¸°ë³¸ í…œí”Œë¦¿ ìƒì„±
                portfolioData.details[key] = { title: "ì œëª© ì—†ìŒ", desc: "ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.", extra: "", link: "#" };
            }
            
            const data = portfolioData.details[key];
            window.currentDetailKey = key; // í˜„ì¬ ìˆ˜ì • ì¤‘ì¸ í‚¤ ì €ì¥

            document.getElementById('detail-title').innerText = data.title;
            document.getElementById('detail-desc').innerText = data.desc;
            document.getElementById('detail-extra').innerText = data.extra || "";
            
            const linkBtn = document.getElementById('detail-link');
            if (data.link && data.link !== "#") {
                linkBtn.href = data.link;
                linkBtn.classList.remove('hidden');
            } else {
                linkBtn.classList.add('hidden');
            }
            
            // í¸ì§‘ ëª¨ë“œë©´ ìƒì„¸ í˜ì´ì§€ë„ í¸ì§‘ ê°€ëŠ¥í•˜ê²Œ
            if (isEditing) {
                document.querySelectorAll('.editable-detail').forEach(el => el.contentEditable = "true");
                linkBtn.classList.remove('hidden'); // ë§í¬ ë²„íŠ¼ ë³´ì´ê²Œ í•´ì„œ ìˆ˜ì • ê°€ëŠ¥í•˜ë„ë¡
                linkBtn.classList.add('editable-link');
            } else {
                document.querySelectorAll('.editable-detail').forEach(el => el.contentEditable = "false");
                linkBtn.classList.remove('editable-link');
            }

            document.getElementById('detail-overlay').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        };

        window.closeDetail = function() {
            // ìƒì„¸ í˜ì´ì§€ ë‹«ì„ ë•Œ ë‚´ìš© ë©”ëª¨ë¦¬ì— ì €ì¥ (ì•„ì§ DB ì €ì¥ì€ ì•„ë‹˜)
            if (isEditing && window.currentDetailKey) {
                const key = window.currentDetailKey;
                portfolioData.details[key].title = document.getElementById('detail-title').innerText;
                portfolioData.details[key].desc = document.getElementById('detail-desc').innerText;
                portfolioData.details[key].extra = document.getElementById('detail-extra').innerText;
                portfolioData.details[key].link = document.getElementById('detail-link').href;
            }

            document.getElementById('detail-overlay').classList.add('hidden');
            document.body.style.overflow = 'auto';
            window.currentDetailKey = null;
        };

        // ì•± ì‹œì‘
        loadContent();

    </script>
</body>
</html>
